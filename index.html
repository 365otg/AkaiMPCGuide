<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charles Paris Akai MPC Guide</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="Master your AKAI MPC with this comprehensive guide by Charles Paris. Explore over 370 essential tips, advanced techniques, workflow hacks, and AI-powered suggestions for sampling, effects, patterns, sequencing, mixing, and more. Your ultimate resource for the MPC Standalone OS, including insights into Charles Paris's music production.">
    <meta name="keywords" content="AKAI MPC, MPC Live, MPC One, MPC X, MPC Key, MPC Standalone, MPC OS, MPC Guide, MPC Tutorial, MPC Tips, MPC Tricks, Sampling, Effects, Sequencing, Drum Machine, Beatmaking, Hip Hop Production, Lofi, Workflow, Automation, Q-Links, MIDI, CV, Ableton Link, Serato, Troubleshooting, The MPC Guide, Ultimate Guide, Charles Paris, Charles Paris music">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css?family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --akai-dark: #1A1A1D;
            --akai-card-bg: #1E1E1E;
            --akai-accent: #FF4500;
            --akai-accent-hover: #FF6347;
            --akai-muted: #4A4A50;
            --akai-muted-hover: #5A5A60;
            --akai-text-light: #E0E0E0;
            --akai-text-dark: #A0A0A0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--akai-dark);
            color: var(--akai-text-light);
            padding-top: 4rem;
            padding-bottom: 4rem;
            background-image: linear-gradient(135deg, #101012 0%, #1A1A1D 100%);
            background-size: 200% 200%;
            animation: gradient-animation 15s ease infinite;
        }

        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .card {
            background-color: var(--akai-card-bg);
            border-radius: 12px;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.5);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            display: flex;
            flex-direction: column;
        }

        .card:hover {
            transform: translateY(-7px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
        }

        .tip-category-button, .header-button {
            background-color: var(--akai-muted);
            color: #ffffff;
            padding: 10px 20px;
            border-radius: 12px;
            font-weight: 600;
            letter-spacing: 0.05em;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .tip-category-button:hover, .header-button:hover {
            background-color: var(--akai-muted-hover);
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }

        .tip-category-button.active {
            background-color: var(--akai-accent);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
        }

        .modal {
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 50;
        }

        .modal-content {
            background-color: var(--akai-card-bg);
            border-radius: 16px;
        }

        .close-button {
            color: #F0F0F0;
            font-size: 1.8rem;
            transition: color 0.2s;
        }

        .close-button:hover {
            color: #FF8888;
        }

        .search-button, #download-pdf-button, .donate-button, .more-info-button, #back-to-tip-button {
            background-color: var(--akai-accent);
            color: #ffffff;
            padding: 12px 22px;
            border-radius: 10px;
            font-weight: 600;
            transition: background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            border: none;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-button:hover, #download-pdf-button:hover, .donate-button:hover, .more-info-button:hover, #back-to-tip-button:hover {
            background-color: var(--akai-accent-hover);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }

        .related-tips-container, .glossary-item, .suggested-tip-container, #details-glossary-container, .fx-item, .ui-guide-section, .modal-donate-section {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--akai-muted);
        }

        .suggested-tip-box {
            background-color: #252525;
            border: 1px solid var(--akai-muted);
            border-left: 5px solid var(--akai-accent);
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }

        .suggested-tip-box:hover {
            background-color: #333;
        }

        .tip-icon {
            margin-right: 12px;
            color: var(--akai-accent);
            font-size: 1.1em;
        }

        .copy-button {
            background-color: var(--akai-muted);
            color: #ffffff;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: 500;
            transition: background-color 0.2s ease-in-out;
            margin-top: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .copy-button:hover {
            background-color: var(--akai-muted-hover);
        }

        .details-view { animation: fadeIn 0.3s ease-in-out; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        footer { border-top: 1px solid var(--akai-muted); padding-top: 2rem; margin-top: 4rem; }

        .footer-link { transition: color 0.2s ease-in-out; color: var(--akai-text-dark); }

        .footer-link:hover { color: var(--akai-accent); }

        h1, h2, h3, h4 { color: var(--akai-text-light); }

        p, li { color: #b0b0b0; }

        #modal-title, #details-title, #glossary-modal h3, #fx-guide-modal h3, #ui-guide-modal h3 {
            color: var(--akai-text-light);
        }

        #modal-description, #modal-source, #details-content, #glossary-content p, #related-tips-list li {
            color: #b0b0b0;
        }

        .main-title {
            background: -webkit-linear-gradient(45deg, #FFD700, #FF4500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .drum-pattern-grid {
            display: grid;
            grid-template-columns: repeat(16, 1fr);
            gap: 4px;
            background-color: #252525;
            padding: 8px;
            border-radius: 8px;
            margin-top: 0.5rem;
        }

        .drum-step {
            width: 100%;
            padding-bottom: 100%; /* Aspect ratio 1:1 */
            background-color: #4A4A50;
            border-radius: 4px;
        }

        .drum-step.active {
            background-color: var(--akai-accent);
        }

        .accordion-button {
            background-color: var(--akai-muted);
            width: 100%;
            text-align: left;
            padding: 1rem;
            font-size: 1.25rem;
            font-weight: 600;
            border-radius: 8px;
            transition: background-color 0.2s;
        }

        .accordion-button:hover {
            background-color: var(--akai-muted-hover);
        }

        .accordion-content {
            background-color: #252525;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center px-4">

    <header class="w-full max-w-7xl text-center mb-12">
        <div class="flex justify-around items-center mb-6 gap-4">
            <button id="mpc-sauce-button" class="header-button"><i class="fa-solid fa-pepper-hot mr-2"></i>MPC Sauce</button>
            <button id="fx-guide-button" class="header-button"><i class="fa-solid fa-sliders mr-2"></i>FX Guide</button>
            <button id="ui-guide-button" class="header-button"><i class="fa-solid fa-display mr-2"></i>UI Guide</button>
            <button id="glossary-button" class="header-button"><i class="fas fa-book mr-2"></i>Glossary</button>
        </div>

        <h1 class="text-5xl lg:text-6xl font-bold main-title mb-4">Charles Paris Akai MPC Guide</h1>
        <p class="text-2xl text-gray-300">Unlock the full potential of your AKAI MPC!</p>
    </header>

    <main class="w-full max-w-6xl">

        <!-- Featured Techniques Section -->
        <section class="mb-16 p-6 featured-section rounded-lg">
            <h2 class="text-3xl font-bold text-center mb-8">Featured Techniques</h2>
            <div id="top-tips-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Featured tips will be dynamically loaded here -->
            </div>
        </section>

        <!-- Filters -->
        <div class="mb-12">
            <h3 class="text-2xl font-bold text-center mb-6">Filter by Category</h3>
            <div id="category-filter-container" class="flex flex-wrap justify-center gap-4">
                <!-- Category buttons will be dynamically loaded here -->
            </div>
        </div>

        <section id="tips-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
            <!-- Tips will be loaded here by JavaScript -->
        </section>

        <div class="flex justify-center mt-16">
            <button id="download-pdf-button" class="search-button"><i class="fa-solid fa-file-pdf"></i> Download The Full Guide as PDF</button>
        </div>

    </main>

    <!-- Tip Modal -->
    <div id="tip-modal" class="modal fixed inset-0 flex items-center justify-center p-4 hidden">
        <div class="modal-content w-full max-w-2xl p-8 relative overflow-y-auto max-h-[90vh]">
            <button id="close-modal" class="close-button absolute top-4 right-4 z-10">&times;</button>

            <!-- Main Tip View -->
            <div id="main-tip-view">
                <h3 id="modal-title" class="text-3xl font-semibold mb-2"></h3>
                <p id="modal-category" class="text-lg text-gray-400 mb-6"></p>
                <p id="modal-description" class="text-lg leading-relaxed"></p>
                <p id="modal-source" class="text-sm mt-6"></p>

                <div class="flex flex-wrap gap-2 mt-4">
                    <button id="copy-tip-button" class="copy-button"><i class="fa-solid fa-copy"></i> Copy Tip</button>
                    <button id="more-info-button" class="more-info-button"><i class="fa-solid fa-circle-info"></i> How-To & Details</button>
                </div>

                <div id="suggested-tip-container" class="suggested-tip-container hidden">
                    <h4 class="text-2xl font-semibold mb-4">You might also like...</h4>
                    <div id="suggested-tip-box" class="suggested-tip-box">
                        <!-- Suggested tip content goes here -->
                    </div>
                </div>

                <div class="modal-donate-section text-center">
                    <a href="https://paypal.me/overtimegrind" target="_blank" class="donate-button text-sm"><i class="fas fa-heart mr-2"></i>Support The Guide</a>
                </div>
            </div>

            <!-- Detailed Explanation View -->
            <div id="details-view" class="hidden">
                <h3 id="details-title" class="text-3xl font-semibold mb-2"></h3>
                <p id="details-category" class="text-lg text-gray-400 mb-6"></p>
                <div id="details-content" class="text-lg leading-relaxed prose prose-invert max-w-none"></div>

                <div id="details-related-container" class="related-tips-container">
                    <h4 class="text-2xl font-semibold mb-4">Related Tips</h4>
                    <ul id="details-related-list" class="list-disc list-inside"></ul>
                </div>

                <div id="details-glossary-container">
                    <h4 class="text-2xl font-semibold mb-4">Relevant Glossary Terms</h4>
                    <div id="details-glossary-list"></div>
                </div>

                <button id="back-to-tip-button" class="search-button mt-6"><i class="fa-solid fa-arrow-left"></i> Back</button>
            </div>

        </div>
    </div>

    <!-- Glossary Modal -->
    <div id="glossary-modal" class="modal fixed inset-0 flex items-center justify-center p-4 hidden">
        <div class="modal-content w-full max-w-2xl p-8 relative overflow-y-auto max-h-[90vh]">
            <button id="close-glossary-modal" class="close-button absolute top-4 right-4 z-10">&times;</button>
            <h3 class="text-4xl font-semibold mb-6">Glossary</h3>
            <input type="search" id="glossary-search-input" placeholder="Search terms..." class="search-input mb-6 w-full">
            <div id="glossary-content" class="text-lg leading-relaxed"></div>
            <div class="modal-donate-section text-center">
                <a href="https://paypal.me/overtimegrind" target="_blank" class="donate-button text-sm"><i class="fas fa-heart mr-2"></i>Support The Guide</a>
            </div>
        </div>
    </div>

    <!-- MPC Sauce Modal -->
    <div id="mpc-sauce-modal" class="modal fixed inset-0 flex items-center justify-center p-4 hidden">
        <div class="modal-content w-full max-w-3xl p-8 relative overflow-y-auto max-h-[90vh]">
            <button id="close-mpc-sauce-modal" class="close-button absolute top-4 right-4 z-10">&times;</button>
            <h3 class="text-4xl font-semibold mb-6"><i class="fa-solid fa-pepper-hot mr-3"></i>MPC Sauce</h3>
            <div id="mpc-sauce-content" class="text-lg leading-relaxed">
                <!-- Music Theory Section -->
                <div class="mb-8">
                    <h4 class="text-2xl font-bold mb-4 border-b-2 border-akai-accent pb-2">Music Theory for Beatmakers</h4>
                    <p class="mb-2"><strong>Minor Pentatonic Scale:</strong> The cheat code for soulful melodies. For C Minor Pentatonic, play these notes: C, Eb, F, G, Bb. It works over almost any minor chord progression.</p>
                    <p class="mb-2"><strong>The 2-5-1 Progression:</strong> A cornerstone of Jazz, R&B, and Lofi. In C Major, the chords are D minor 7, G dominant 7, and C Major 7. Perfect for smooth, looping chord changes.</p>
                    <p><strong>Finding the Key:</strong> Use Pad Perform > Scales to lock your pads to a specific key. This ensures every note you play sounds good together. A great starting point is C Minor.</p>
                </div>

                <!-- Drum Patterns Section -->
                <div>
                    <h4 class="text-2xl font-bold mb-4 border-b-2 border-akai-accent pb-2">Iconic & Foundational Drum Patterns</h4>
                    <div id="drum-patterns-container">
                        <!-- Drum patterns will be dynamically inserted here -->
                    </div>
                </div>

                <div class="modal-donate-section text-center">
                    <a href="https://paypal.me/overtimegrind" target="_blank" class="donate-button text-sm"><i class="fas fa-heart mr-2"></i>Support The Guide</a>
                </div>
            </div>
        </div>
    </div>

    <!-- FX Guide Modal -->
    <div id="fx-guide-modal" class="modal fixed inset-0 flex items-center justify-center p-4 hidden">
        <div class="modal-content w-full max-w-3xl p-8 relative overflow-y-auto max-h-[90vh]">
            <button id="close-fx-guide-modal" class="close-button absolute top-4 right-4 z-10">&times;</button>
            <h3 class="text-4xl font-semibold mb-6"><i class="fa-solid fa-sliders mr-3"></i>FX Guide</h3>
            <input type="search" id="fx-search-input" placeholder="Search effects..." class="search-input mb-6 w-full">
            <div id="fx-guide-content" class="text-lg leading-relaxed"></div>
            <div class="modal-donate-section text-center">
                <a href="https://paypal.me/overtimegrind" target="_blank" class="donate-button text-sm"><i class="fas fa-heart mr-2"></i>Support The Guide</a>
            </div>
        </div>
    </div>

    <!-- UI Guide Modal -->
    <div id="ui-guide-modal" class="modal fixed inset-0 flex items-center justify-center p-4 hidden">
        <div class="modal-content w-full max-w-4xl p-8 relative overflow-y-auto max-h-[90vh]">
            <button id="close-ui-guide-modal" class="close-button absolute top-4 right-4 z-10">&times;</button>
            <h3 class="text-4xl font-semibold mb-6"><i class="fa-solid fa-display mr-3"></i>UI Guide: Screen & Menu Explorer</h3>
            <div id="ui-guide-content" class="space-y-4">
                <!-- UI Guide content will be dynamically inserted here -->
            </div>
            <div class="modal-donate-section text-center">
                <a href="https://paypal.me/overtimegrind" target="_blank" class="donate-button text-sm"><i class="fas fa-heart mr-2"></i>Support The Guide</a>
            </div>
        </div>
    </div>

    <footer class="w-full max-w-6xl text-center text-gray-500">
        <p class="mb-4">Built by <a href="https://365otg.github.io/365CP/" target="_blank" class="font-bold footer-link">Charles A Paris</a></p>
        <div class="flex justify-center items-center gap-6 text-2xl">
            <a href="https://twitter.com/365charlesparis" target="_blank" class="footer-link"><i class="fab fa-twitter"></i></a>
            <a href="https://youtube.com/365charlesparis" target="_blank" class="footer-link"><i class="fab fa-youtube"></i></a>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const { jsPDF } = window.jspdf;

            const tipsData = [
                // --- Concepts & Setup ---
                { id: 101, category: "concepts_setup", title: "Understanding Track Types", description: "Learn the unique purpose of each track type: Audio, Drum, Keygroup, Plugin, MIDI, and CV.", source: "Manual p.40", difficulty: "Easy", context: "<strong>How-To:</strong> In MAIN mode, tap the track name area. A window will appear allowing you to select a track type.<br><br><strong>Why:</strong> The MPC is multi-timbral, playing multiple sounds at once. Each sound source needs a specific track type. Use DRUM for sample kits, KEYGROUP for melodic samples, PLUGIN for internal synths, AUDIO for linear recordings like vocals, and MIDI/CV for external hardware." },
                { id: 102, category: "concepts_setup", title: "Project vs. Program vs. Sample", description: "Understand the hierarchy: A Project contains Programs, and Programs contain Samples.", source: "Manual p.356", difficulty: "Easy", context: "<strong>How-To:</strong> Think of it like a folder." },
                { id: 106, category: "concepts_setup", title: "Understanding Polyphony", description: "Be mindful of polyphony (the number of simultaneous notes) to avoid sounds cutting each other off.", source: "MPC Bible p.187", difficulty: "Easy", context: "<strong>How-To:</strong> There's no direct control, but you manage it by being efficient. Use Mute Groups for hi-hats, keep reverb/delay tails in check, and resample or flatten CPU-heavy tracks.<br><br><strong>Why:</strong> Each sample layer, effect, and plugin voice uses up polyphony. If you exceed the maximum, you'll experience 'note stealing', where older notes are cut off to make room for new ones." },
                { id: 107, category: "concepts_setup", title: "The Importance of Saving", description: "Regularly save your project. Use 'Save As' to create different versions of your project.", source: "MPC Bible p.46", difficulty: "Easy", context: "<strong>How-To:</strong> Go to MENU > SAVE. Use 'Save' to update the current project file. Use 'Save As' to create a new version." },
                { id: 112, category: "concepts_setup", title: "File System Compatibility", description: "Use exFAT formatted drives for the best compatibility between your MPC, Mac, and PC.", source: "Manual p.132", difficulty: "Easy", context: "<strong>How-To:</strong> Format your SD cards, USB drives, and SATA drives to the exFAT file system using your computer's disk utility.<br><br><strong>Why:</strong> The MPC can read/write to exFAT, FAT32, and NTFS. While it can read Mac HFS+ drives, it cannot write to them. exFAT is the most flexible universal option." },
                { id: 113, category: "concepts_setup", title: "Audio Interface Expansion", description: "Connect a class-compliant USB audio interface to expand your MPC's audio inputs and outputs.", source: "Manual p.58", difficulty: "Intermediate", context: "<strong>How-To:</strong> Connect your interface to a USB port on the MPC. Go to PREFERENCES > AUDIO DEVICE and select your interface from the dropdown menu. You can now choose from its inputs and outputs in the Sampler and Channel Mixer." },
                // --- Main Mode & Workflow ---
                { id: 202, category: "main_mode_workflow", title: "Exploding a Drum Program", description: "In MAIN mode, select a drum track. Tap the pencil icon next to the track name and choose 'Explode'. This creates a separate track for each pad in your drum program, allowing individual mixing.", source: "MPC Bible p.165", difficulty: "Intermediate", context: "<strong>How-To:</strong> This is crucial for detailed mixing. Instead of having all your drums on one track with shared effects, 'Explode' gives you a dedicated mixer channel for your kick, snare, hats, etc., so you can apply unique EQ, compression, and effects to each element." },
                { id: 203, category: "main_mode_workflow", title: "Using the Looper for Quick Ideas", description: "The Looper is perfect for capturing spontaneous ideas without stopping playback. Record a vocal line or instrument part, then export it as a sample to use in your project immediately.", source: "Manual p.323", difficulty: "Intermediate", context: "The Looper is always available for recording. If you're jamming over your beat and play a great melody or vocal freestyle, you can instantly capture it without having to set up a new track and hit record. It's a powerful tool for capturing creative moments." },
                { id: 204, category: "main_mode_workflow", title: "Next Sequence Mode for Live Arranging", description: "Use Next Sequence mode to trigger different sequences on the fly by pressing pads. This is a powerful way to arrange your song live or create dynamic performances.", source: "Manual p.119", difficulty: "Intermediate", context: "<strong>How-To:</strong> In MAIN mode, press the NEXT SEQ button. The pads will light up, representing your sequences. Tap a pad to trigger that sequence. You can set the quantize value for seamless transitions.<br><br><strong>Why:</strong> This is a fundamental technique for live performance and fluid song arrangement. It allows you to build your song section by section and switch between them effortlessly." },
                { id: 209, category: "main_mode_workflow", title: "Retrospective Record", description: "Played a great melody but forgot to hit record? Press Shift + Rec to capture the last MIDI performance you played into the currently selected track.", source: "MPC Bible p.97", difficulty: "Intermediate", context: "<strong>How-To:</strong> If you play a great melody or drum pattern while not in record mode, immediately press <strong>SHIFT + REC</strong>. The MPC will place the MIDI data you just played onto the selected track. <br><br><strong>Why:</strong> This is a lifesaver for capturing spontaneous moments of creativity without the pressure of being in record mode. The MPC is always 'listening' to your MIDI input." },
                { id: 210, category: "main_mode_workflow", title: "The 'Erase' Button", description: "While a sequence is playing, hold the ERASE button and press a pad to delete all notes for that pad in real-time. A quick way to clean up a performance.", source: "Manual p.82", difficulty: "Easy", context: "<strong>How-To:</strong> This is a performance-oriented erase function. It's much faster than going into Grid Edit to delete notes. Great for quickly removing unwanted elements or fixing mistakes during playback." },
                { id: 217, category: "main_mode_workflow", title: "Checking System Resources", description: "Monitor your MPC's CPU and RAM usage by tapping the battery/chip icon in the top-right corner. This helps you manage project complexity and avoid crashes.", source: "Manual p.55", difficulty: "Easy", context: "If your MPC starts acting sluggish or you get 'not enough memory' errors, check the System Resources. You may need to use the 'Purge' function to remove unused samples or flatten tracks to free up CPU and RAM." },
                { id: 218, category: "main_mode_workflow", title: "The 'Purge' Function", description: "In the PROJECT screen (MENU > PROJECT), use the PURGE button to remove all unused samples, programs, and sequences from your project. This frees up RAM and disk space.", source: "MPC Bible p.47", difficulty: "Easy", context: "<strong>How-To:</strong> This is essential for optimizing your project. After a lot of chopping and experimenting, you'll inevitably have unused assets. Purging cleans up your project, making it more efficient and preventing 'out of memory' errors." },
                { id: 224, category: "main_mode_workflow", title: "List Edit Mode", description: "For precise, numerical editing of MIDI events, use LIST EDIT mode. Here you can see and edit the exact timing, velocity, and duration of every note.", source: "Manual p.179", difficulty: "Hard", context: "While GRID EDIT is great for visual editing, LIST EDIT offers unparalleled precision. It's the best place to fine-tune the timing of a drum hit by a few ticks or to ensure the velocity of multiple notes is exactly the same." },
                { id: 225, category: "main_mode_workflow", title: "Bouncing a Track to Audio", description: "Convert a MIDI track (with a plugin or program) into an audio track by going to TRACK EDIT > Bounce to Audio Track. This frees up CPU and 'prints' your effects.", source: "MPC Bible p.629", difficulty: "Intermediate", context: "This is a crucial workflow for managing CPU. If you have a complex plugin or many effects on a track, bouncing it to audio converts it into a simple audio file, reducing CPU load and allowing you to add more elements to your project." },
                // --- Sampling & Sampler ---
                { id: 306, category: "sampling_sampler", title: "Sampling from Vinyl", description: "Connect your turntable to the RCA inputs and set the switch to PHONO. Don't forget to connect the grounding wire to the grounding terminal to eliminate hum.", source: "Manual p.333", difficulty: "Easy", context: "The MPC's phono preamp is designed to boost the low-level signal from a turntable. Proper connection, including the ground wire, is essential for a clean, noise-free sample." },
                { id: 307, category: "sampling_sampler", title: "Sampling in Mono", description: "When sampling a mono source like a bass guitar or a vocal, set the Sampler input to a single channel (e.g., Input 1) and the output to Mono. This saves memory and avoids unnecessary stereo files.", source: "Manual p.282", difficulty: "Easy", context: "Many classic samples are in mono. Sampling in mono is an efficient practice that saves disk space and RAM. There's no benefit to recording a mono source as a stereo file." },
                { id: 314, category: "sampling_sampler", "title": "Slicing While Sampling", "description": "In the SAMPLER, use 'Slice' mode to insert slice markers in real-time as you record. Tap a pad each time you want to create a new slice.", "source": "Manual p.286", "difficulty": "Intermediate", "context": "This is an incredibly fast way to chop a sample. As a drum break plays, you can tap a pad on each drum hit (kick, snare, etc.). When you stop recording, the MPC has already chopped the break for you, ready to be converted to a program." },
                { id: 315, category: "sampling_sampler", "title": "Using the Tuner", "description": "The MPC has a built-in Tuner, accessible from the SAMPLER screen or the main pull-down menu. Use it to check the pitch of your external instruments before sampling.", "source": "Manual p.285", "difficulty": "Easy", "context": "Ensuring your samples are in tune with your project is crucial. The Tuner provides a quick and easy way to verify the pitch of any incoming audio signal before you record it." },
                // --- Sample Edit & Chop ---
                { id: 401, category: "sample_edit_chop", title: "Time Stretching with Warp", description: "In Sample Edit, use the Warp function to change a sample's length without altering its pitch. This is essential for matching loops to your project's tempo.", source: "MPC Bible p.468", difficulty: "Intermediate", context: "Warping allows you to make a loop fit any BPM. The MPC offers several warp algorithms; 'Pro Ten' is generally the best for quality in standalone, while 'Elastique Pro' is superior in the MPC Software. Use it to sync loops or for creative sound design by extreme stretching." },
                { id: 403, category: "sample_edit_chop", title: "Discard, Extract, and Process Slices", description: "In Sample Edit, use the Process menu to apply effects like Normalize, Reverse, or Pitch Shift to individual slices or the entire sample. Use 'Discard' to delete a slice and 'Extract' to save a slice as a new sample.", source: "Manual p.200", difficulty: "Intermediate", context: "These functions give you powerful non-destructive editing capabilities. You can experiment with different effects on slices without altering the original sample, or quickly save out perfect chops as new samples." },
                { id: 408, category: "sample_edit_chop", title: "Manual Chopping", description: "For ultimate control, use Manual chop mode. Play the sample and tap the 'Add Slice' button or a pad in real-time to insert slice markers exactly where you want them.", source: "MPC Bible p.400", difficulty: "Intermediate", context: "While automatic chopping is fast, manual chopping gives you the artistic freedom to place slices based on feel rather than just transients. This is key for getting the perfect groove from a sample." },
                { id: 409, category: "sample_edit_chop", title: "Auditioning Slices", description: "In Chop mode, you can play back your slices by hitting the corresponding pads. Use the 'Slice' button to toggle between playing the entire sample or just the selected slice.", source: "Manual p.190", difficulty: "Easy", context: "Before committing to your chops, it's vital to audition them. This function allows you to quickly check how each slice sounds in isolation and in context, ensuring your chops are precise and musical." },
                // --- Sequencing & Grid ---
                { id: 506, category: "sequencing_grid", title: "Splitting Events (Ratchets)", description: "In the Track row, use the pencil icon > Split Events to divide a single MIDI note into multiple smaller notes (ratchets), creating fast rolls and fills.", source: "MPC Bible p.128", difficulty: "Intermediate", context: "This feature is perfect for creating modern trap-style hi-hat rolls or fast snare fills. It takes a single note and divides it into a specified number of smaller, equal-length notes, automating a process that would be difficult to play by hand." },
                { id: 507, category: "sequencing_grid", title: "Swing and Groove", description: "In the Timing Correct (TC) window, apply Swing to your 16th or 8th notes to shift the timing of every other note, creating a classic hip-hop or house groove.", source: "MPC Bible p.101", difficulty: "Intermediate", context: "Swing is the magic ingredient for groove. Instead of notes landing perfectly on the grid, swing delays the off-beat notes by a percentage, giving your beats a more human, laid-back, or driving feel. Experiment with different swing percentages to find the perfect pocket." },
                // --- Programs & Keygroups ---
                { id: 605, category: "programs_keygroups", title: "Auto-Sampling a Plugin", description: "In Program Edit for a Plugin track, use the Auto-Sampler to automatically sample your plugin across multiple notes and velocities, creating a Keygroup program. This saves CPU and allows you to use the sampled instrument in standalone mode.", source: "MPC Bible p.582", difficulty: "Intermediate", context: "This is the quickest way to turn any one-shot sample into a playable instrument. It takes a single sample, creates a new Keygroup program, and automatically maps the sample across the pads or a keyboard, allowing you to instantly play melodies and chords with it." },
                { id: 606, category: "programs_keygroups", title: "Random Layer Playback (Round Robin)", description: "Assign multiple, similar samples to different layers of a single pad. In Program Edit > Global, set Layer Play to 'Random' or 'Cycle' to trigger a different sample each time, creating natural variation.", source: "MPC Bible p.158", difficulty: "Hard", context: "This technique, often called 'round robin,' is essential for realism. By assigning slightly different recordings of the same sound (e.g., three different hi-hat hits) to a pad and setting Layer Play to 'Cycle' or 'Random,' you can avoid the robotic 'machine gun' effect and create more natural-sounding drums and instruments." },
                // --- Mixing & Effects ---
                { id: 802, category: "mixing_effects", title: "Sidechain Compression (Mother Ducker)", description: "Use the Mother Ducker effect on a bass or pad track and set its key input to your kick drum track. This will automatically lower the volume of the bass/pad whenever the kick hits, creating space in the mix.", source: "Manual p.267", difficulty: "Intermediate", context: "This is the classic technique for making a kick drum punch through the mix. The 'ducking' effect creates a rhythmic pumping that is a staple of electronic music. The Mother Ducker is a dedicated plugin that makes setting this up incredibly easy." },
                { id: 803, category: "mixing_effects", title: "Using Submixes (Groups)", description: "Route the output of multiple tracks (e.g., all your drum tracks) to a Submix track. This allows you to control the overall volume and apply effects to the entire group with a single fader.", source: "Manual p.255", difficulty: "Intermediate", context: "Submixes are fundamental for efficient mixing. Instead of adjusting the volume and effects on each individual drum track, you can control the entire drum bus with one set of controls, streamlining your workflow and ensuring a cohesive sound." },
                // --- Sound Design & Synthesis ---
                { id: 1002, category: "sound_design_synthesis", title: "Creating a Sub Bass with Tubesynth", description: "Use the Tubesynth plugin to create a powerful sub bass. Start with a simple sine wave, then use the 'Drive' and 'Tone' controls to add subtle harmonics and warmth.", source: "MPC Plugin Manual", difficulty: "Easy", context: "A solid sub bass is the foundation of many genres. Tubesynth is perfect for this. A clean sine wave provides the fundamental low-end weight, while a small amount of drive can help it translate better on smaller speakers without becoming too distorted." },
                { id: 1003, category: "sound_design_synthesis", title: "Using LFOs for Movement", description: "In any synth plugin or keygroup program, use a Low-Frequency Oscillator (LFO) to modulate parameters. A classic use is assigning a slow sine wave LFO to pitch to create vibrato, or to filter cutoff for a sweeping effect.", source: "Manual p.220", difficulty: "Intermediate", context: "LFOs add life and movement to static sounds. By subtly automating parameters like pitch, volume, or filter cutoff, you can create evolving textures, rhythmic pulsations, and expressive modulations that make your sounds more interesting." },
                // --- Integration & Sync ---
                { id: 1202, category: "integration_sync", title: "MIDI Thru Functionality", description: "Enable MIDI Thru in PREFERENCES > MIDI/SYNC to pass incoming MIDI data from your computer or other devices through the MPC's MIDI outputs to control external gear.", source: "Manual p.54", difficulty: "Intermediate", context: "This saves you from needing a separate MIDI interface. You can have a MIDI track in Ableton Live sending MIDI data out of your MPC's physical MIDI OUT port to an external synthesizer, seamlessly integrating your hardware with your software." },
                { id: 1203, category: "integration_sync", title: "Serato Studio Integration", description: "Sync your MPC with Serato DJ Pro. Your MPC can act as a powerful controller for Serato, allowing you to trigger cues, loops, and samples in perfect time with your DJ set.", source: "AkaiPro Website", difficulty: "Intermediate", context: "This blurs the line between DJing and live production. You can have your MPC's sequencer playing in sync with the tracks you're DJing in Serato, allowing you to add live drums, samples, and melodies over your set." },
                // --- File Management & Export ---
                { id: 1301, category: "file_management_export", title: "Exporting Stems", description: "To send your tracks to another DAW for mixing, use EXPORT > EXPORT AS AUDIO MIXDOWN > EXPLODE PROGRAMS. This exports each track as a separate WAV file, perfectly synced.", source: "Manual p.370", difficulty: "Intermediate", context: "Exporting stems is crucial for collaboration or for finishing your mix in a dedicated DAW like Pro Tools or Logic. 'Explode Programs' ensures that each individual drum sound or keygroup layer gets its own audio file, giving the mixing engineer maximum control." },
                // --- Controller Mode & Software ---
                { id: 1501, category: "controller_mode_software", title: "Accessing VST/AU Plugins", description: "In Controller Mode, the MPC 2 Software can host third-party VST (Windows/Mac) and AU (Mac) plugins. This gives you access to a massive world of instruments and effects.", source: "MPC Software Manual", difficulty: "Intermediate", context: "While the standalone MPC has powerful built-in plugins, the MPC 2 software opens the door to industry-standard plugins like Serum, Kontakt, and FabFilter. You can use these plugins in your project and then bounce the tracks to audio to use them back in standalone mode." },
                { id: 1502, category: "controller_mode_software", title: "Bouncing from Software to Standalone", description: "After using CPU-heavy VSTs in the software, bounce your tracks to audio (File > Export > Stems). Save the project to your standalone drive, and you can then open it on your MPC hardware with the VST sounds perfectly printed as audio tracks.", source: "MPC User Experience", difficulty: "Intermediate", context: "This is a key workflow for hybrid users. You can leverage the power of your computer's plugins for sound design and then 'print' those sounds into your MPC standalone project, allowing you to continue working untethered from the computer." }
            ];

            const glossaryData = [
                { term: "Envelope", definition: "A shape that changes a sound's characteristics over time. Most commonly used for volume (Amp Envelope) and filter cutoff (Filter Envelope)." },
                { term: "Explode", definition: "An MPC function that separates each pad from a single drum track onto its own new track for individual mixing." },
                { term: "Filter", definition: "An effect that removes or boosts certain frequencies from a sound. Common types are Low-Pass (removes highs), High-Pass (removes lows), and Band-Pass (removes highs and lows)." },
                { term: "Keygroup Program", definition: "An MPC program type where a sample is pitched across the pads or a keyboard, allowing you to play it melodically." },
                { term: "LFO", definition: "Low-Frequency Oscillator. An oscillator that moves very slowly, used to modulate parameters like pitch (for vibrato), volume (for tremolo), or filter cutoff to create movement in a sound." },
                { term: "MIDI", definition: "Musical Instrument Digital Interface. A protocol that allows electronic musical instruments and computers to communicate." },
                { term: "Polyphony", definition: "The maximum number of notes or voices that can sound simultaneously on an instrument or in a project." },
                { term: "Program", definition: "A container for samples, plugins, or MIDI settings that define how sounds are played on the MPC pads or a connected keyboard." },
                { term: "Quantize", definition: "A function that automatically corrects the timing of recorded notes, snapping them to the nearest grid line (e.g., 1/16th note)." },
                { term: "Sample", definition: "A digital recording of an audio sound, which can then be manipulated, played back, and used in an MPC project." },
                { term: "Sequence", definition: "A musical pattern or arrangement of notes and events that plays on one or more tracks. A song is typically made up of multiple sequences." },
                { term: "Sidechain Compression", definition: "An effect where the volume of one track is automatically lowered by the presence of another track. Commonly used to make a kick drum 'punch through' a bassline." },
                { term: "Pad Perform", definition: "An MPC mode that maps musical scales, chords, or progressions across the 16 pads, making it easier to play complex musical parts." },
                { term: "Round Robin", definition: "A technique where multiple different samples of the same sound are triggered in rotation (or randomly) to create natural variation and avoid the 'machine gun' effect." },
                { term: "Submix", definition: "A track that receives audio from multiple other tracks, allowing them to be processed as a group with shared effects and volume control." },
                { term: "Tempo", definition: "The speed of a musical piece, usually measured in Beats Per Minute (BPM)." },
                { term: "Timing Correct (TC)", definition: "The MPC's quantize function, used to automatically correct the timing of recorded MIDI notes." },
                { term: "Track", definition: "A lane in a sequence that holds MIDI or audio data for a specific instrument, drum program, or audio recording." },
                { term: "Transient", definition: "The initial, high-energy peak at the beginning of a sound's waveform, like the crack of a snare drum." },
                { term: "Zero Crossing", definition: "The point where an audio waveform crosses the center horizontal line (zero amplitude). Editing samples at zero crossings helps prevent audible clicks and pops." }
            ];

            const drumPatterns = [
                { name: "Classic Boom Bap", artist: "DJ Premier / Pete Rock", bpm: 90, pattern: { 'Kick': [0, 8], 'Snare': [4, 12], 'Hi-Hat': [0, 2, 4, 6, 8, 10, 12, 14] } },
                { name: "The Big Beat", artist: "Billy Squier", bpm: 90, pattern: { 'Kick': [0, 8], 'Snare': [4, 12], 'Clap': [4, 12] } },
                { name: "Walk This Way", artist: "Aerosmith / Run-DMC", bpm: 109, pattern: { 'Kick': [0, 8], 'Snare': [4, 12], 'Hi-Hat': [0, 2, 4, 6, 8, 10, 12, 14] } },
                { name: "Planet Rock", artist: "Afrika Bambaataa", bpm: 127, pattern: { 'Kick': [0, 6, 10], 'Snare': [4, 12], 'Clap': [4, 12] } },
                { name: "Shook Ones, Pt. II", artist: "Mobb Deep", bpm: 94, pattern: { 'Kick': [0, 2, 8], 'Snare': [4, 12], 'Hi-Hat': [0, 2, 4, 6, 8, 10, 12, 14] } },
                { name: "C.R.E.A.M.", artist: "Wu-Tang Clan", bpm: 93, pattern: { 'Kick': [0, 6], 'Snare': [4, 12], 'Hi-Hat': [0, 2, 4, 6, 8, 10, 12, 14] } },
                { name: "Still D.R.E.", artist: "Dr. Dre", bpm: 93, pattern: { 'Kick': [0, 7], 'Snare': [4, 12], 'Hi-Hat': [0, 2, 4, 6, 8, 10, 12, 14] } },
                { name: "Regulate", artist: "Warren G", bpm: 96, pattern: { 'Kick': [0, 8], 'Snare': [4, 12], 'Hi-Hat': [0, 2, 4, 6, 8, 10, 12, 14] } }
            ];

            const fxData = [
                // DYNAMICS
                { name: "AIR Compressor", category: "Dynamics", description: "A standard compressor to control dynamic range. Use it to make sounds punchier and more consistent in volume." },
                { name: "AIR Expander", category: "Dynamics", description: "The opposite of a compressor. It increases dynamic range, making quiet parts quieter. Good for reducing noise or creating gating effects." },
                { name: "AIR Gate", category: "Dynamics", description: "A noise gate that silences audio below a certain threshold. Perfect for cleaning up background noise in recordings." },
                { name: "AIR Limiter", category: "Dynamics", description: "A type of ultra-fast compressor that prevents a signal from ever exceeding a set ceiling. Use it on the master track to prevent clipping." },
                { name: "AIR Maximizer", category: "Dynamics", description: "An advanced limiter designed to increase the overall loudness of a track without introducing distortion. Great for mastering." },
                { name: "Mother Ducker", category: "Dynamics", description: "A dedicated sidechain compressor for rhythmic ducking effects, commonly used to make kicks punch through basslines." },
                { name: "Mother Ducker (Input)", category: "Dynamics", description: "Similar to Mother Ducker, but uses an external input signal to trigger the compression." },
                // EQ & FILTERS
                { name: "AIR EQ (4-Band)", category: "EQ & Filters", description: "A versatile 4-band parametric equalizer for shaping the frequency content of your sounds." },
                { name: "AIR Filter", category: "EQ & Filters", description: "A multi-mode filter (low-pass, high-pass, band-pass) with resonance and envelope control for creative sound shaping." },
                // DELAY & REVERB
                { name: "AIR Delay", category: "Delay & Reverb", description: "A standard delay effect for echoes and rhythmic repeats." },
                { name: "AIR Reverb", category: "Delay & Reverb", description: "A versatile reverb effect to add spaciousness and ambience to your sounds." },
                { name: "AIR Spring Reverb", category: "Delay & Reverb", description: "Emulates the classic metallic sound of a spring reverb unit." },
                // MODULATION
                { name: "AIR Chorus", category: "Modulation", description: "Creates a thicker, wider sound by duplicating the signal and subtly detuning and delaying the copies." },
                { name: "AIR Flanger", category: "Modulation", description: "Creates a sweeping, 'jet plane' sound by mixing the signal with a delayed, modulated copy of itself." },
                { name: "AIR Phaser", category: "Modulation", description: "Creates a swirling, psychedelic effect by shifting the phase of the signal." },
                { name: "AIR Tremolo", category: "Modulation", description: "Modulates the volume of the signal up and down, creating a rhythmic pulsing effect." },
                { name: "AIR Pumper", category: "Modulation", description: "Creates a rhythmic pumping/gating effect, similar to sidechain compression, but with more control over the pumping shape." },
                // DISTORTION & SATURATION
                { name: "AIR Distortion", category: "Distortion", description: "A heavy distortion effect for aggressive sounds." },
                { name: "AIR Fuzz-Wah", category: "Distortion", description: "Combines a fuzz distortion with a wah-wah filter effect." },
                { name: "AIR Lo-Fi", category: "Distortion", description: "Degrades the audio quality, adding bit-crushing and sample rate reduction for vintage or distorted effects." },
                { name: "AIR Amp Sim", category: "Distortion", description: "Simulates a variety of guitar and bass amplifiers, providing tones from clean to heavily distorted." },
                { name: "AIR Tube Drive", category: "Distortion", description: "Adds warm, tube-style saturation and overdrive." },
                // SPECIAL
                { name: "AIR Talkbox", category: "Special", description: "A vocal effect that makes instruments 'speak' by imposing vocal characteristics onto the sound." },
                { name: "AIR Vocoder", category: "Special", description: "Combines two audio signals (a carrier and a modulator) to create robotic vocal effects or unique textures." },
                { name: "AIR Stutter", category: "Special", description: "A creative stutter and buffer effect that can be used to create complex edits and fills." }
            ];

            const uiGuideData = [
                {
                    title: "Main Screen",
                    content: "The Main Screen is the central hub of your project, providing an overview of all your tracks and sequences.",
                    elements: [
                        { name: "Track List", description: "The main area on the left. Shows all tracks in the current sequence. Tap a track to select it for recording or editing." },
                        { name: "Sequence Bar", description: "At the top. Shows the current sequence number and name. Tap the pencil icon to copy, delete, or change sequence parameters." },
                        { name: "Timeline/Grid", description: "The large area on the right displaying your sequence as a timeline. In Grid View, it shows notes and events." },
                        { name: "Mode Buttons", description: "Buttons like TRACK, PROGRAM, PAD PERFORM, etc., that switch the MPC's main operational mode." }
                    ]
                },
                {
                    title: "Program Edit",
                    content: "Program Edit is the deep-dive editor for shaping your Drum and Keygroup programs.",
                    elements: [
                        { name: "Global Tab", description: "Controls settings for the entire program, like polyphony and Layer Play mode (Round Robin)." },
                        { name: "Samples Tab", description: "Assign samples to layers on each pad. This is where you build velocity-switched instruments." },
                        { name: "Envelopes Tab", description: "Shape your sounds with Amp (volume) and Filter envelopes (ADSR)." },
                        { name: "LFO/Modulation Tab", description: "Use LFOs to create movement and access the Vintage Mode emulations." },
                        { name: "Mod Matrix Tab", description: "The advanced routing page where you can assign any modulation source (LFO, Velocity, etc.) to any destination (Pitch, Filter, etc.)." }
                    ]
                },
                {
                    title: "Sampler",
                    content: "The Sampler is where you record, trim, and prepare your audio samples.",
                    elements: [
                        { name: "Input Source", description: "Selects where the audio is coming from (e.g., Inputs 1/2, Phono, Resample)." },
                        { name: "Record Level", description: "Adjusts the input gain for recording." },
                        { name: "Threshold", description: "Sets the level at which recording automatically starts." },
                        { name: "Monitor", description: "Enables or disables monitoring of the input signal." },
                        { name: "Trim / Chop Tabs", description: "Switches between the two main editing modes. Trim is for editing the whole sample, Chop is for slicing it." },
                        { name: "Start/End/Slice Points", description: "The markers used to define regions of the sample for editing or playback." },
                        { name: "Process Button", description: "Opens a menu of destructive processes like Normalize, Reverse, Pitch Shift, Time Stretch, and Create Stems." },
                        { name: "Convert Button", description: "Accessed with SHIFT. Converts your slices into a new Program, a Patched Phrase, or clips." }
                    ]
                },
                {
                    title: "Channel Mixer",
                    content: "The Channel Mixer provides a traditional mixing board view of all your tracks, returns, and submixes.",
                    elements: [
                        { name: "Channel Strip", description: "A vertical column representing one track. Contains a volume fader, pan knob, mute/solo buttons, and insert effects slots." },
                        { name: "Inserts", description: "The slots (usually 4) on each channel strip where you can load effects plugins." },
                        { name: "Sends", description: "Controls the amount of signal sent from a track to a Return effect (e.g., a global reverb)." },
                        { name: "Output", description: "Determines where the track's audio is routed (e.g., Master, Submix, specific audio output)." },
                        { name: "Automation Read/Write", description: "Toggles whether automation is being read or written for a track." }
                    ]
                }
            ];

            // DOM Elements
            const tipsContainer = document.getElementById('tips-container');
            const categoryFilterContainer = document.getElementById('category-filter-container');
            const topTipsContainer = document.getElementById('top-tips-container');

            const tipModal = document.getElementById('tip-modal');
            const closeModalButton = document.getElementById('close-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalCategory = document.getElementById('modal-category');
            const modalDescription = document.getElementById('modal-description');
            const modalSource = document.getElementById('modal-source');
            const copyTipButton = document.getElementById('copy-tip-button');
            const moreInfoButton = document.getElementById('more-info-button');

            const detailsView = document.getElementById('details-view');
            const detailsTitle = document.getElementById('details-title');
            const detailsCategory = document.getElementById('details-category');
            const detailsContent = document.getElementById('details-content');
            const backToTipButton = document.getElementById('back-to-tip-button');
            const detailsRelatedList = document.getElementById('details-related-list');
            const detailsGlossaryList = document.getElementById('details-glossary-list');

            const suggestedTipContainer = document.getElementById('suggested-tip-container');
            const suggestedTipBox = document.getElementById('suggested-tip-box');
            const downloadPdfButton = document.getElementById('download-pdf-button');

            const mpcSauceButton = document.getElementById('mpc-sauce-button');
            const mpcSauceModal = document.getElementById('mpc-sauce-modal');
            const closeMpcSauceModalButton = document.getElementById('close-mpc-sauce-modal');

            const fxGuideButton = document.getElementById('fx-guide-button');
            const fxGuideModal = document.getElementById('fx-guide-modal');
            const closeFxGuideModalButton = document.getElementById('close-fx-guide-modal');
            const fxSearchInput = document.getElementById('fx-search-input');
            const fxGuideContent = document.getElementById('fx-guide-content');

            const uiGuideButton = document.getElementById('ui-guide-button');
            const uiGuideModal = document.getElementById('ui-guide-modal');
            const closeUiGuideModalButton = document.getElementById('close-ui-guide-modal');
            const uiGuideContent = document.getElementById('ui-guide-content');

            const glossaryButton = document.getElementById('glossary-button');
            const glossaryModal = document.getElementById('glossary-modal');
            const closeGlossaryModalButton = document.getElementById('close-glossary-modal');
            const glossarySearchInput = document.getElementById('glossary-search-input');
            const glossaryContent = document.getElementById('glossary-content');

            let currentTip = null;
            let currentCategory = 'all';
            let currentDifficulty = 'all';

            const categoryIcons = {
                concepts_setup: 'fa-solid fa-lightbulb',
                main_mode_workflow: 'fa-solid fa-gears',
                sampling_sampler: 'fa-solid fa-microphone-alt',
                sample_edit_chop: 'fa-solid fa-scissors',
                sequencing_grid: 'fa-solid fa-timeline',
                programs_keygroups: 'fa-solid fa-cubes',
                mixing_effects: 'fa-solid fa-sliders',
                sound_design_synthesis: 'fa-solid fa-wave-square',
                integration_sync: 'fa-solid fa-link',
                file_management_export: 'fa-solid fa-folder-open',
                advanced_workflows: 'fa-solid fa-graduation-cap',
                controller_mode_software: 'fa-solid fa-computer'
            };

            function getIconHtml(category) {
                const iconClass = categoryIcons[category] || 'fa-solid fa-info-circle';
                return `<i class="${iconClass} tip-icon"></i>`;
            }

            function getDifficultyBadge(difficulty) {
                if (!difficulty) return '';
                const lowerCaseDifficulty = difficulty.toLowerCase();
                let badgeClass = '';
                switch(lowerCaseDifficulty) {
                    case 'easy': badgeClass = 'difficulty-easy bg-green-600'; break;
                    case 'intermediate': badgeClass = 'difficulty-intermediate bg-yellow-600'; break;
                    case 'hard': badgeClass = 'difficulty-hard bg-red-600'; break;
                }
                return `<span class="px-3 py-1 rounded-full text-xs font-semibold ${badgeClass}">${difficulty}</span>`;
            }

            function populateCategories() {
                const categories = [...new Set(tipsData.map(tip => tip.category))];
                categoryFilterContainer.innerHTML = '<button class="tip-category-button active" data-category="all">All</button>';
                categories.sort().forEach(category => {
                    const categoryName = category.replace(/_/g, ' & ').replace(/\b\w/g, l => l.toUpperCase());
                    const button = document.createElement('button');
                    button.className = 'tip-category-button';
                    button.dataset.category = category;
                    button.textContent = categoryName;
                    categoryFilterContainer.appendChild(button);
                });

                document.querySelectorAll('.tip-category-button').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.tip-category-button').forEach(btn => btn.classList.remove('active'));
                        e.target.classList.add('active');
                        currentCategory = e.target.dataset.category;
                        displayTips(currentCategory, '', currentDifficulty);
                    });
                });
            }

            function displayTips(category, searchTerm = '', difficulty = 'all') {
                tipsContainer.innerHTML = '';
                let filteredTips = tipsData;

                if (category !== 'all') {
                    filteredTips = filteredTips.filter(tip => tip.category === category);
                }

                if (difficulty !== 'all') {
                    filteredTips = filteredTips.filter(tip => tip.difficulty === difficulty);
                }

                if (searchTerm.trim()) {
                    const lowerCaseSearchTerm = searchTerm.toLowerCase().trim();
                    filteredTips = filteredTips.filter(tip =>
                        tip.title.toLowerCase().includes(lowerCaseSearchTerm) ||
                        tip.description.toLowerCase().includes(lowerCaseSearchTerm) ||
                        (tip.context && tip.context.toLowerCase().includes(lowerCaseSearchTerm)) ||
                        tip.category.replace(/_/g, ' ').toLowerCase().includes(lowerCaseSearchTerm)
                    );
                }

                if (filteredTips.length === 0) {
                    tipsContainer.innerHTML = '<p class="text-center text-gray-400 text-xl col-span-full">No tips found for this selection.</p>';
                    return;
                }

                filteredTips.forEach(tip => {
                    const tipElement = document.createElement('div');
                    tipElement.className = 'card p-6 rounded-lg cursor-pointer flex flex-col';
                    tipElement.innerHTML = `
                        <div class="flex-grow">
                            <h4 class="text-xl font-semibold mb-2 flex items-center">${getIconHtml(tip.category)}${tip.title}</h4>
                            <p class="text-gray-400 mb-4">${tip.description}</p>
                        </div>
                        <div class="mt-auto pt-4 flex justify-between items-center">
                            ${getDifficultyBadge(tip.difficulty)}
                            <span class="text-sm text-gray-500">Click to learn more</span>
                        </div>
                    `;
                    tipElement.addEventListener('click', () => openModal(tip));
                    tipsContainer.appendChild(tipElement);
                });
            }

            function displayTopTips() {
                topTipsContainer.innerHTML = '';
                const topTips = tipsData.filter(tip => tip.topTip).slice(0, 3);

                if(topTips.length < 3) {
                    const fallbackTips = tipsData.filter(t => !t.topTip).slice(0, 3 - topTips.length);
                    topTips.push(...fallbackTips);
                }
                topTips.forEach(tip => {
                    const tipElement = document.createElement('div');
                    tipElement.className = 'card p-6 rounded-lg cursor-pointer flex flex-col';
                    tipElement.innerHTML = `
                        <div class="flex-grow">
                            <h4 class="text-xl font-semibold mb-2 flex items-center">${getIconHtml(tip.category)}${tip.title}</h4>
                            <p class="text-base text-gray-400">${tip.description}</p>
                        </div>
                        <div class="mt-auto pt-4 flex justify-between items-center">
                            ${getDifficultyBadge(tip.difficulty)}
                            <span class="text-sm text-gray-500">Featured Tip</span>
                        </div>
                    `;
                    tipElement.addEventListener('click', () => openModal(tip));
                    topTipsContainer.appendChild(tipElement);
                });
            }

            function displayRelatedTipsInModal(currentTip) {
                detailsRelatedList.innerHTML = '';
                const related = tipsData.filter(tip =>
                    tip.category === currentTip.category && tip.id !== currentTip.id
                ).slice(0, 5); // Limit to 5 related tips

                if (related.length === 0) {
                    detailsRelatedList.innerHTML = '<li>No related tips found.</li>';
                    return;
                }
                related.forEach(tip => {
                    const li = document.createElement('li');
                    li.className = 'mb-2';
                    const a = document.createElement('a');
                    a.href = '#';
                    a.textContent = tip.title;
                    a.className = 'hover:text-[var(--akai-accent)] transition-colors';
                    a.onclick = (e) => {
                        e.preventDefault();
                        openModal(tip);
                    };
                    li.appendChild(a);
                    detailsRelatedList.appendChild(li);
                });
            }

            function displayGlossaryTermsInModal(tip) {
                detailsGlossaryList.innerHTML = '';
                const tipText = (tip.context + ' ' + tip.description).toLowerCase();
                const foundTerms = new Set();
                glossaryData.forEach(term => {
                    const regex = new RegExp(`\\b${term.term.toLowerCase()}\\b`, 'g');
                    if (tipText.match(regex)) {
                        foundTerms.add(term.term);
                    }
                });

                if (foundTerms.size === 0) {
                    detailsGlossaryList.innerHTML = '<p>No relevant glossary terms found for this tip.</p>';
                    return;
                }

                foundTerms.forEach(termName => {
                    const termData = glossaryData.find(t => t.term === termName);
                    if (termData) {
                        const termElement = document.createElement('div');
                        termElement.className = 'mb-4';
                        termElement.innerHTML = `
                            <p><strong>${termData.term}:</strong> ${termData.definition}</p>
                        `;
                        detailsGlossaryList.appendChild(termElement);
                    }
                });
            }

            function displaySuggestedTip(tip) {
                if (tip.suggestedTipId) {
                    const suggestedTip = tipsData.find(t => t.id === tip.suggestedTipId);
                    if (suggestedTip) {
                        suggestedTipBox.innerHTML = `
                            <h5 class="font-bold text-white">${getIconHtml(suggestedTip.category)}${suggestedTip.title}</h5>
                            <p class="text-sm text-gray-400">${suggestedTip.description}</p>
                        `;
                        suggestedTipBox.onclick = () => openModal(suggestedTip);
                        suggestedTipContainer.classList.remove('hidden');
                    }
                } else {
                    suggestedTipContainer.classList.add('hidden');
                }
            }

            function openModal(tip) {
                currentTip = tip;
                mainTipView.classList.remove('hidden');
                detailsView.classList.add('hidden');
                const categoryName = tip.category.replace(/_/g, ' & ').replace(/\b\w/g, l => l.toUpperCase());

                modalTitle.innerHTML = `${getIconHtml(tip.category)}${tip.title}`;
                modalCategory.textContent = `Category: ${categoryName} | Difficulty: ${tip.difficulty}`;
                modalDescription.innerHTML = tip.description;
                modalSource.textContent = tip.source ? `Source: ${tip.source}` : '';

                if (tip.context) {
                    moreInfoButton.style.display = 'inline-flex';
                } else {
                    moreInfoButton.style.display = 'none';
                }
                displaySuggestedTip(tip);
                tipModal.classList.remove('hidden');
            }

            function showDetailsView() {
                if (!currentTip || !currentTip.context) return;

                mainTipView.classList.add('hidden');
                detailsView.classList.remove('hidden');
                const categoryName = currentTip.category.replace(/_/g, ' & ').replace(/\b\w/g, l => l.toUpperCase());
                detailsTitle.innerHTML = `${getIconHtml(currentTip.category)}${currentTip.title}`;
                detailsCategory.textContent = `Category: ${categoryName} | Difficulty: ${currentTip.difficulty}`;
                detailsContent.innerHTML = currentTip.context.replace(/\n/g, '<br><br>');
                displayRelatedTipsInModal(currentTip);
                displayGlossaryTermsInModal(currentTip);
            }

            function showMainTipView() {
                detailsView.classList.add('hidden');
                mainTipView.classList.remove('hidden');
            }

            function closeModal() {
                tipModal.classList.add('hidden');
            }

            function copyTipToClipboard(tip) {
                const tipText = `Tip: ${tip.title}\nDifficulty: ${tip.difficulty}\nCategory: ${tip.category.replace(/_/g, ' & ').replace(/\b\w/g, l => l.toUpperCase())}\n\n${tip.description}\n\n${tip.context ? 'How-To & Details:\n' + tip.context.replace(/<br><br>/g, '\n').replace(/<strong>|<\/strong>/g, '') : ''}\n\nSource: ${tip.source || 'N/A'}\n\n#AKAI_MPC_Guide #MPC_Tips #CharlesParis`;

                // Create a temporary textarea element to copy the text
                const textarea = document.createElement('textarea');
                textarea.value = tipText;
                document.body.appendChild(textarea);
                textarea.select();
                try {
                    document.execCommand('copy');
                    const originalText = copyTipButton.innerHTML;
                    copyTipButton.innerHTML = '<i class="fa-solid fa-check"></i> Copied!';
                    setTimeout(() => { copyTipButton.innerHTML = originalText; }, 2000);
                } catch (err) {
                    console.error('Failed to copy tip: ', err);
                } finally {
                    document.body.removeChild(textarea);
                }
            }

            function generatePdf() {
                const doc = new jsPDF();
                let y = 15;
                const margin = 10;
                const pageHeight = doc.internal.pageSize.height;
                const pageWidth = doc.internal.pageSize.width;

                const addPageIfNeeded = (neededHeight) => {
                    if (y + neededHeight > pageHeight - margin) {
                        doc.addPage();
                        y = margin;
                    }
                };

                doc.setFontSize(22);
                doc.text("Charles Paris Akai MPC Guide", pageWidth / 2, y, { align: 'center' });
                y += 8;
                doc.setFontSize(10);
                doc.setTextColor(0, 0, 255);
                const link = "https://365otg.github.io/AkaiMPCGuide/";
                doc.textWithLink("Interactive Web Version: Click Here", pageWidth / 2, y, { url: link, align: 'center' });
                y += 8;
                doc.setTextColor(0, 0, 0); // Reset text color to black

                doc.setFontSize(12);
                doc.text("Master your AKAI MPC with this comprehensive guide by Charles Paris. Explore over 370 essential tips, advanced techniques, workflow hacks, and AI-powered suggestions for sampling, effects, patterns, sequencing, mixing, and more. Your ultimate resource for the MPC Standalone OS, including insights into Charles Paris's music production.", margin, y, { maxWidth: pageWidth - (2 * margin), align: 'center' });
                y += doc.splitTextToSize("Master your AKAI MPC with this comprehensive guide by Charles Paris. Explore over 370 essential tips, advanced techniques, workflow hacks, and AI-powered suggestions for sampling, effects, patterns, sequencing, mixing, and more. Your ultimate resource for the MPC Standalone OS, including insights into Charles Paris's music production.", pageWidth - (2 * margin)).length * 5;
                y += 15;

                let currentCategoryPdf = '';
                const sortedTips = [...tipsData].sort((a, b) => a.category.localeCompare(b.category) || a.title.localeCompare(b.title));

                sortedTips.forEach((tip) => {
                    if (tip.category !== currentCategoryPdf) {
                        currentCategoryPdf = tip.category;
                        addPageIfNeeded(20);
                        doc.setFontSize(16);
                        doc.setFont(undefined, 'bold');
                        const categoryTitle = currentCategoryPdf.replace(/_/g, ' & ').replace(/\b\w/g, l => l.toUpperCase());
                        doc.text(categoryTitle, margin, y);
                        y += 10;
                    }

                    const titleText = `${tip.title} (${tip.difficulty})`;
                    const descriptionText = `How-To: ${tip.context.replace(/<br>/g, '\n').replace(/<strong>|<\/strong>/g, '')}`;

                    doc.setFontSize(12);
                    doc.setFont(undefined, 'bold');
                    const titleLines = doc.splitTextToSize(titleText, pageWidth - (2 * margin));
                    doc.text(titleLines, margin, y);
                    y += titleLines.length * 5;

                    doc.setFontSize(10);
                    doc.setFont(undefined, 'normal');
                    const descriptionLines = doc.splitTextToSize(descriptionText, pageWidth - (2 * margin));
                    addPageIfNeeded(descriptionLines.length * 5 + 10); // Check if description fits
                    doc.text(descriptionLines, margin, y);
                    y += descriptionLines.length * 5;
                    doc.text(`Source: ${tip.source || 'N/A'}`, margin, y);
                    y += 8; // Small gap between tips
                });

                doc.save('Charles_Paris_Akai_MPC_Guide.pdf');
            }

            function displayGlossary(searchTerm = '') {
                glossaryContent.innerHTML = '';
                const lowerCaseSearchTerm = searchTerm.toLowerCase().trim();
                const filteredGlossary = glossaryData.filter(item =>
                    item.term.toLowerCase().includes(lowerCaseSearchTerm) ||
                    item.definition.toLowerCase().includes(lowerCaseSearchTerm)
                );

                if (filteredGlossary.length === 0) {
                    glossaryContent.innerHTML = '<p>No terms found.</p>';
                    return;
                }

                filteredGlossary.sort((a, b) => a.term.localeCompare(b.term)).forEach(item => {
                    const termElement = document.createElement('div');
                    termElement.className = 'glossary-item';
                    termElement.innerHTML = `
                        <h4 class="text-2xl font-bold mb-2">${item.term}</h4>
                        <p>${item.definition}</p>
                    `;
                    glossaryContent.appendChild(termElement);
                });
            }

            function displayFxGuide(searchTerm = '') {
                fxGuideContent.innerHTML = '';
                const lowerCaseSearchTerm = searchTerm.toLowerCase().trim();
                const filteredFx = fxData.filter(item =>
                    item.name.toLowerCase().includes(lowerCaseSearchTerm) ||
                    item.description.toLowerCase().includes(lowerCaseSearchTerm) ||
                    item.category.toLowerCase().includes(lowerCaseSearchTerm)
                );

                if (filteredFx.length === 0) {
                    fxGuideContent.innerHTML = '<p>No effects found.</p>';
                    return;
                }

                let currentCategory = '';
                filteredFx.sort((a, b) => a.category.localeCompare(b.category) || a.name.localeCompare(b.name)).forEach(item => {
                    if (item.category !== currentCategory) {
                        currentCategory = item.category;
                        const categoryHeader = document.createElement('h4');
                        categoryHeader.className = "text-3xl font-bold mt-6 mb-2 border-b-2 border-akai-accent pb-2";
                        categoryHeader.textContent = currentCategory;
                        fxGuideContent.appendChild(categoryHeader);
                    }
                    const fxElement = document.createElement('div');
                    fxElement.className = 'fx-item';
                    fxElement.innerHTML = `
                        <h5 class="text-2xl font-bold mb-2">${item.name}</h5>
                        <p>${item.description}</p>
                    `;
                    fxGuideContent.appendChild(fxElement);
                });
            }

            function populateUiGuide() {
                uiGuideContent.innerHTML = '';
                uiGuideData.forEach(section => {
                    const sectionContainer = document.createElement('div');
                    const button = document.createElement('button');
                    button.className = 'accordion-button';
                    button.textContent = section.title;
                    const content = document.createElement('div');
                    content.className = 'accordion-content hidden';

                    let contentHtml = `<p class="mb-4 text-lg">${section.content}</p>`;
                    section.elements.forEach(el => {
                        contentHtml += `<p class="mb-2"><strong>${el.name}:</strong> ${el.description}</p>`;
                    });
                    content.innerHTML = contentHtml;

                    button.addEventListener('click', () => {
                        content.classList.toggle('hidden');
                    });

                    sectionContainer.appendChild(button);
                    sectionContainer.appendChild(content);
                    uiGuideContent.appendChild(sectionContainer);
                });
            }

            function createDrumPattern(container, patternData) {
                const patternContainer = document.createElement('div');
                patternContainer.className = 'mb-6';

                const title = document.createElement('h5');
                title.className = 'text-xl font-semibold mb-1';
                title.textContent = patternData.name;
                patternContainer.appendChild(title);

                const artist = document.createElement('p');
                artist.className = 'text-sm text-gray-400 mb-3';
                artist.textContent = `Style of: ${patternData.artist} (${patternData.bpm} BPM)`;
                patternContainer.appendChild(artist);

                // Header row for steps (1-16)
                const headerRow = document.createElement('div');
                headerRow.className = 'flex items-center gap-2 mb-1';
                const emptyHeader = document.createElement('div');
                emptyHeader.className = 'w-20'; // Adjust width to match instrument label
                headerRow.appendChild(emptyHeader);
                const gridHeader = document.createElement('div');
                gridHeader.className = 'drum-pattern-grid flex-1';
                gridHeader.style.backgroundColor = 'transparent'; // Make header background transparent
                gridHeader.style.padding = '0'; // Remove padding for header
                for(let i = 1; i <= 16; i++) {
                    const stepNum = document.createElement('div');
                    stepNum.className = 'text-center text-xs text-gray-500';
                    stepNum.textContent = i;
                    gridHeader.appendChild(stepNum);
                }
                headerRow.appendChild(gridHeader);
                patternContainer.appendChild(headerRow);

                // Instrument rows
                for (const instrument in patternData.pattern) {
                    const instrumentRow = document.createElement('div');
                    instrumentRow.className = 'flex items-center gap-2 mb-2';

                    const instrumentLabel = document.createElement('div');
                    instrumentLabel.className = 'w-20 text-right font-semibold text-sm';
                    instrumentLabel.textContent = instrument;
                    instrumentRow.appendChild(instrumentLabel);

                    const grid = document.createElement('div');
                    grid.className = 'drum-pattern-grid flex-1';

                    for (let i = 0; i < 16; i++) {
                        const step = document.createElement('div');
                        step.className = 'drum-step';
                        if (patternData.pattern[instrument].includes(i)) {
                            step.classList.add('active');
                        }
                        grid.appendChild(step);
                    }
                    instrumentRow.appendChild(grid);
                    patternContainer.appendChild(instrumentRow);
                }
                container.appendChild(patternContainer);
            }

            function populateMpcSauce() {
                const container = document.getElementById('drum-patterns-container');
                if (!container) return;
                container.innerHTML = '';
                drumPatterns.forEach(pattern => {
                    createDrumPattern(container, pattern);
                });
            }

            // --- EVENT LISTENERS ---
            closeModalButton.addEventListener('click', closeModal);
            copyTipButton.addEventListener('click', () => copyTipToClipboard(currentTip));
            moreInfoButton.addEventListener('click', showDetailsView);
            backToTipButton.addEventListener('click', showMainTipView);
            downloadPdfButton.addEventListener('click', generatePdf);

            glossaryButton.addEventListener('click', () => {
                glossaryModal.classList.remove('hidden');
                displayGlossary();
            });
            closeGlossaryModalButton.addEventListener('click', () =>
                glossaryModal.classList.add('hidden')
            );
            glossaryModal.addEventListener('click', (e) => {
                if (e.target === glossaryModal) glossaryModal.classList.add('hidden');
            });
            glossarySearchInput.addEventListener('input', (e) => displayGlossary(e.target.value));

            mpcSauceButton.addEventListener('click', () =>
                mpcSauceModal.classList.remove('hidden')
            );
            closeMpcSauceModalButton.addEventListener('click', () =>
                mpcSauceModal.classList.add('hidden')
            );
            mpcSauceModal.addEventListener('click', (e) => {
                if (e.target === mpcSauceModal) mpcSauceModal.classList.add('hidden');
            });

            fxGuideButton.addEventListener('click', () => {
                fxGuideModal.classList.remove('hidden');
                displayFxGuide();
            });
            closeFxGuideModalButton.addEventListener('click', () =>
                fxGuideModal.classList.add('hidden')
            );
            fxGuideModal.addEventListener('click', (e) => {
                if (e.target === fxGuideModal) fxGuideModal.classList.add('hidden');
            });
            fxSearchInput.addEventListener('input', (e) => displayFxGuide(e.target.value));

            uiGuideButton.addEventListener('click', () => {
                uiGuideModal.classList.remove('hidden');
                populateUiGuide();
            });
            closeUiGuideModalButton.addEventListener('click', () =>
                uiGuideModal.classList.add('hidden')
            );
            uiGuideModal.addEventListener('click', (e) => {
                if (e.target === uiGuideModal) uiGuideModal.classList.add('hidden');
            });

            // Initial setup
            function init() {
                populateCategories();
                displayTopTips();
                // Set default category to Sampling
                currentCategory = 'sampling_sampler';
                document.querySelector('.tip-category-button.active').classList.remove('active');
                const samplingButton = document.querySelector('.tip-category-button[data-category="sampling_sampler"]');

                if (samplingButton) {
                    samplingButton.classList.add('active');
                } else {
                    // Fallback to 'all' if the category doesn't exist for some reason
                    document.querySelector('.tip-category-button[data-category="all"]').classList.add('active');
                    currentCategory = 'all';
                }
                displayTips(currentCategory, '', currentDifficulty);
                populateMpcSauce();
                populateUiGuide();
            }

            init();
        });
    </script>
</body>
</html>
